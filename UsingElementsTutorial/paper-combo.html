<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/paper-item/paper-item.html">
<link rel="import" href="bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="bower_components/paper-dropdown-menu/paper-dropdown-menu.html">

<dom-module id="paper-combo">
  <!-- Defines the element's style and local DOM -->
  <template>
    <paper-dropdown-menu id="theDrop" required={{dropRequired}} label={{dropLabel}}>
      <paper-listbox id="theList" class="dropdown-content" on-iron-select="handleSelect">
        <paper-item>allosaurus</paper-item>
        <paper-item>brontosaurus</paper-item>
        <paper-item>carcharodontosaurus</paper-item>
        <paper-item>diplodocus</paper-item>

      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <!-- Creates the element's prototype and registers it -->
  <script>
    Polymer({
      is: 'paper-combo',
      properties: {
        dropLabel: {
          type:String,
          value:"",
        },
        dropRequired: {
          type: Boolean,
          value: false,
          notify: true,
          reflectToAttribute: true
        },
      },
      addItem: function(caption) {
        var newItem = document.createElement('paper-item');
        newItem.innerHTML = caption;
        
        Polymer.dom(this.$.theList).appendChild(newItem);
      },
      getSelectedItem: function() {
        return this.$.theDrop.selectedItem;
      },
      getSelectedItemLabel: function() {
        return this.$.theDrop.selectedItemLabel;
      },
      handleSelect: function(e) {
        console.log("item selected!");
        console.log(e);
        this.fire('selected',{ selected:this.getSelectedItemLabel() });
      }
    });
  </script>

</dom-module>